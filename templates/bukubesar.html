{% extends 'base.html' %}
{% block content %}
<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title mb-3">Filter Buku Besar</h5>
        <form action="/bukubesar" method="GET" class="row align-items-end g-3">
            <div class="col-md-6">
                <label class="form-label small text-muted fw-bold">PILIH AKUN</label>
                <select name="akun" class="form-select">
                    {% for a in akun_list %}
                    <option value="{{ a.kode_akun }}" {% if selected == a.kode_akun %}selected{% endif %}>
                        {{ a.kode_akun }} - {{ a.nama_akun }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary w-100"><i class="fa-solid fa-filter me-2"></i> Tampilkan</button>
            </div>
        </form>
    </div>
</div>

{% if selected %}
<div class="card">
    <div class="card-header">
        Rincian Transaksi
    </div>
    <div class="table-responsive">
        <table class="table table-bordered mb-0">
            <thead class="table-light">
                <tr>
                    <th>Tanggal</th>
                    <th>Keterangan</th>
                    <th class="text-end">Debit</th>
                    <th class="text-end">Kredit</th>
                </tr>
            </thead>
            <tbody>
                {% for t in transaksi %}
                <tr>
                    <td>{{ t.tanggal }}</td>
                    <td>{{ t.deskripsi }}</td>
                    <td class="text-end">{{ "{:,.0f}".format(t.debit) if t.debit > 0 else '-' }}</td>
                    <td class="text-end">{{ "{:,.0f}".format(t.kredit) if t.kredit > 0 else '-' }}</td>
                </tr>
                {% endfor %}
                {% if not transaksi %}
                <tr><td colspan="4" class="text-center py-4 text-muted">Belum ada transaksi untuk akun ini.</td></tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}
{% endblock %}