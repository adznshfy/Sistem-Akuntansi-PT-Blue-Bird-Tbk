{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h4 class="fw-bold mb-0">Laporan Keuangan</h4>
        <p class="text-muted small">PT BLUE BIRD TBK</p>
    </div>
    <button class="btn btn-outline-dark btn-sm" onclick="window.print()"><i class="fa-solid fa-print"></i> PDF</button>
</div>

{% if jenis == 'labarugi' %}
<div class="card border-top border-4 border-success shadow">
    <div class="card-body p-5">
        <h5 class="text-center fw-bold mb-4">LAPORAN LABA RUGI</h5>
        <table class="table table-hover">
            <tr><td class="fw-bold text-primary">PENDAPATAN USAHA</td><td class="text-end fw-bold">Rp {{ "{:,.0f}".format(pdpt) }}</td></tr>
            <tr><td>Beban Operasional</td><td class="text-end text-danger">(Rp {{ "{:,.0f}".format(beban) }})</td></tr>
            <tr class="table-active border-top border-dark border-2"><td class="fw-bold fs-5">LABA BERSIH</td><td class="text-end fw-bold fs-5 text-success">Rp {{ "{:,.0f}".format(laba) }}</td></tr>
        </table>
    </div>
</div>
{% endif %}

{% if jenis == 'neraca' %}
<div class="card border-top border-4 border-primary shadow">
    <div class="card-body p-5">
        <h5 class="text-center fw-bold mb-4">LAPORAN POSISI KEUANGAN</h5>
        <div class="row">
            <div class="col-md-6 border-end">
                <h6 class="fw-bold bg-light p-2 mb-3">ASET</h6>
                <table class="table table-sm table-borderless">
                    {% for a in aset %}<tr><td>{{ a.nama_akun }}</td><td class="text-end">{{ "{:,.0f}".format(a.val) }}</td></tr>{% endfor %}
                    <tr class="fw-bold border-top"><td>TOTAL ASET</td><td class="text-end">Rp {{ "{:,.0f}".format(t_aset) }}</td></tr>
                </table>
            </div>
            <div class="col-md-6 ps-4">
                <h6 class="fw-bold bg-light p-2 mb-3">LIABILITAS & EKUITAS</h6>
                <table class="table table-sm table-borderless">
                    <tr><td colspan="2" class="fw-bold text-muted small">LIABILITAS</td></tr>
                    {% for l in liabilitas %}<tr><td class="ps-3">{{ l.nama_akun }}</td><td class="text-end">{{ "{:,.0f}".format(l.val) }}</td></tr>{% endfor %}
                    <tr><td colspan="2" class="fw-bold text-muted small mt-2">EKUITAS</td></tr>
                    {% for e in ekuitas %}<tr><td class="ps-3">{{ e.nama_akun }}</td><td class="text-end">{{ "{:,.0f}".format(e.val) }}</td></tr>{% endfor %}
                    <tr><td class="ps-3 fst-italic text-success">Laba Tahun Berjalan</td><td class="text-end">{{ "{:,.0f}".format(laba) }}</td></tr>
                    <tr class="fw-bold border-top"><td>TOTAL PASIVA</td><td class="text-end">Rp {{ "{:,.0f}".format(t_pasiva) }}</td></tr>
                </table>
            </div>
        </div>
    </div>
</div>
{% endif %}

{% if jenis == 'ekuitas' %}
<div class="card border-top border-4 border-warning shadow">
    <div class="card-body p-5">
        <h5 class="text-center fw-bold mb-4">LAPORAN PERUBAHAN EKUITAS</h5>
        <table class="table table-striped">
            {% for e in ekuitas %}<tr><td>{{ e.nama_akun }}</td><td class="text-end">Rp {{ "{:,.0f}".format(e.val) }}</td></tr>{% endfor %}
            <tr><td class="text-success fw-bold">Tambah: Laba Bersih</td><td class="text-end text-success">Rp {{ "{:,.0f}".format(laba) }}</td></tr>
            {% set t_ek = namespace(value=0) %}
            {% for e in ekuitas %}{% set t_ek.value = t_ek.value + e.val %}{% endfor %}
            <tr class="fw-bold fs-5 border-top border-2 border-dark"><td>EKUITAS AKHIR</td><td class="text-end">Rp {{ "{:,.0f}".format(t_ek.value + laba) }}</td></tr>
        </table>
    </div>
</div>
{% endif %}

{% if jenis == 'aruskas' %}
<div class="card border-top border-4 border-info shadow">
    <div class="card-body p-5">
        <h5 class="text-center fw-bold mb-4">LAPORAN ARUS KAS (Direct Method)</h5>
        <table class="table table-sm table-striped">
            <thead><tr><th>Tanggal</th><th>Aktivitas</th><th class="text-end">Aliran Kas</th></tr></thead>
            <tbody>
                {% for row in arus_kas %}
                <tr><td>{{ row.tanggal }}</td><td>{{ row.deskripsi }}</td><td class="text-end fw-bold {{ 'text-success' if row.aliran > 0 else 'text-danger' }}">{{ "{:,.0f}".format(row.aliran) }}</td></tr>
                {% endfor %}
            </tbody>
            <tfoot class="table-dark"><tr><td colspan="2" class="fw-bold">SALDO KAS AKHIR</td><td class="text-end fw-bold">Rp {{ "{:,.0f}".format(kas_akhir) }}</td></tr></tfoot>
        </table>
    </div>
</div>
{% endif %}
{% endblock %}